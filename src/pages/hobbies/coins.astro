---
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
import { formatDate, sortByDateDesc } from "../../lib/posts";

const posts = sortByDateDesc(await getCollection("posts", ({ data }) => !data.draft && data.tags.includes("coins")));
---

<BaseLayout title="Numismatics | Dogus Ural">
  <section class="section">
    <div class="container">
      <h1>ðŸª™ Numismatics</h1>
      <p class="muted">
        I mostly collect Classical Greek tetradrachms and Roman Republic silver denarii.
      </p>
      <p>
        <a href="/hobbies/coins/collection">Open the numismatic cabinet â†’</a>
      </p>
      <div class="post-grid">
        {
          posts.map((post) => (
            <article class="card post-card">
              {post.data.cover && <img src={post.data.cover} alt={post.data.title} class="cover-img" />}
              <div class="post-meta">
                <span class="pill">{formatDate(post.data.date)}</span>
              </div>
              <h2>{post.data.title}</h2>
              <p class="muted">{post.data.excerpt}</p>
              <a href={`/posts/${post.slug}`}>Read post</a>
            </article>
          ))
        }
      </div>
    </div>
  </section>
</BaseLayout>
